{% load static %}
<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Eliminar Usuarios - UAnorte</title>
  <link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@400;600;700;800;900&display=swap" rel="stylesheet">
  <link rel="icon" href="https://uanorte.edu.co/web/wp-content/uploads/2023/10/Diseno_sin_titulo-removebg-preview-59x59.png" type="image/png">
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@6.5.1/css/all.min.css">
  <link rel="stylesheet" href="{% static 'miapp/css/elimirarUsuarios.css' %}">
  <script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script>
</head>

<body>
  <!-- ========================================== BOTÃ“N VOLVER ========================================== -->
  <div class="logout-global">
    <a href="{% url 'pagina_estatica' 'crudUsuarios' %}">
      <button type="submit" class="logout-btn">
        <span><i class="fas fa-sign-out-alt"></i>Volver</span>
      </button>
    </a>
  </div>

  <!-- ========================================== ELIMINAR USUARIOS ========================================== -->

  <div class="registro-container">
    <div class="registro-box">
      <img src="{% static 'miapp/media/logoUAnorte.png' %}" alt="Campus UA Norte" class="logo">
      <h2>Eliminar Usuarios</h2>

      <form method="POST" action="{% url 'eliminar_usuarios' %}">
        {% csrf_token %}
        <div class="form-group">
          <label for="usuario">Usuario o Correo:</label>
          <input type="text" id="usuario" name="usuario" placeholder="Ingresa el usuario o correo" required>
        </div>
        <button type="submit" name="buscar"><span>Buscar</span></button>
      </form>

      {% if usuarios %}
        <div class="resultados">
          <h3>Resultados:</h3>
          <div class="table-container">
            <table>
              <thead>
                <tr>
                  <th>Usuario</th>
                  <th>Email</th>
                  <th>Rol</th>
                  <th>Acciones</th>
                </tr>
              </thead>
              <tbody>
                {% for user in usuarios %}
                <tr>
                  <td>{{ user.username }}</td>
                  <td>{{ user.email }}</td>
                  <td>{{ user.get_rol_display }}</td>
                  <td>
                    <form method="POST" class="form-eliminar">
                      {% csrf_token %}
                      <input type="hidden" name="user_id" value="{{ user.id }}">
                      <button type="submit" name="eliminar" class="btn-eliminar">
                        <span><i class="fas fa-user-times"></i> Eliminar</span>
                      </button>
                    </form>
                  </td>
                </tr>
                {% endfor %}
              </tbody>
            </table>
          </div>
        </div>
      {% endif %}

      {% for message in messages %}
        <script>
          Swal.fire({
            icon: "{% if message.tags == 'success' %}success{% elif message.tags == 'warning' %}warning{% else %}error{% endif %}",
            title: "{{ message }}"
          });
        </script>
      {% endfor %}
    </div>
  </div>

  <!-- ========================================== SCRIPTS ========================================== -->
  <script src="{% static 'miapp/js/eliminarUsuarios.js' %}"></script>
  <script src="{% static 'miapp/js/preloader.js' %}"></script>
</body>
</html>